# Template padrão para workers
# Valores base que podem ser sobrescritos pela aplicação

replicaCount: 1

image:
  pullPolicy: IfNotPresent

# Workers não precisam de service pois não expõem portas
service:
  enabled: false

resources:
  limits:
    cpu: "300m"
    memory: "512Mi"
  requests:
    cpu: "100m"
    memory: "128Mi"

# Liveness e Readiness probes específicos para workers
livenessProbe:
  exec:
    command:
      - /bin/sh
      - -c
      - ps aux | grep node
  initialDelaySeconds: 30
  periodSeconds: 15

# Configurações de auto-scaling baseado em filas
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 5
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80

# Garantia de disponibilidade mínima
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# Security context padrão
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  allowPrivilegeEscalation: false

# Configurações para graceful shutdown
terminationGracePeriodSeconds: 60